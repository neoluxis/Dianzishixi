C51 COMPILER V9.60.7.0   MAIN                                                              03/22/2024 08:47:20 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include   <AT89X52.h>
   2          #include   <system.h>
   3          #define    BEEP     P3_6
   4          #define    PWMOUT   P3_7
   5          unsigned   char     count=0;      //定义变量“count”为定时器计数中间值
   6          unsigned   char     pwm_level=10; //定义“pwm_level”为亮度等级，0-20。值越大，灯越暗
   7          unsigned   int      i;            //计数值
   8          /*---定时器T0初始化---*/
   9          void T0_INT(void)
  10          {
  11   1        TMOD=0x11;
  12   1        TL0=(65535-50)%256;  //设定T0初值，50个计数值，时间是50*2us=0.1ms
  13   1        TH0=(65535-50)/256;  //设定T0初值，50个计数值，时间是50*2us=0.1ms
  14   1        IE=0x8A;             //开启定时器中断
  15   1        TR0=1;               //TR0=1开启定时器，TR0=0关闭定时器
  16   1      }
  17          /*---T0中断，约0.1ms/次，用于产生PWM波形---*/
  18          void time0() interrupt 1
  19          { 
  20   1        TL0=(65535-50)%256;
  21   1        TH0=(65535-50)/256;
  22   1        count++;
  23   1        if(count>20)
  24   1        {
  25   2          count=0;
  26   2          }
  27   1        if((count<(pwm_level+1))&&(count<21))
  28   1        {
  29   2        PWMOUT=1;
  30   2        }
  31   1        else
  32   1        { 
  33   2          PWMOUT=0;
  34   2        }
  35   1      }
  36          /*程序从这里开始运行*/
  37          main()
  38          { 
  39   1        T0_INT();
  40   1        ledpoweroff();        //所有的LED断电
  41   1        ledpoweron();       //所有的LED上电
  42   1        ledallon();           //所有的LED亮
  43   1        for(i=0;i<100;i++)    //循环100次，让蜂鸣器响一下
  44   1        {
  45   2           BEEP=0;
  46   2           DelayMs(1);
  47   2         BEEP=1; 
  48   2         DelayMs(1); 
  49   2        } 
  50   1        DelayMs(1000);        //延时1秒左右
  51   1        ledalloff();          //关闭所有的LED灯
  52   1        while(1)          //主循环
  53   1        {
  54   2           for(i=1;i<17;i++)  //循环16次，用于对称点亮LED灯
  55   2             {
C51 COMPILER V9.60.7.0   MAIN                                                              03/22/2024 08:47:20 PAGE 2   

  56   3               ledon(i);
  57   3           ledon(32-i);
  58   3           DelayMs(10);
  59   3           BEEP=~BEEP;
  60   3             }
  61   2         DelayMs(500);
  62   2         for(i=1;i<17;i++)  //循环16次，用于对称关闭LED灯
  63   2             {
  64   3               ledoff(i);
  65   3           ledoff(32-i);
  66   3           DelayMs(10);
  67   3           BEEP=~BEEP;
  68   3             }
  69   2         DelayMs(500);    //等待0.5秒
  70   2        }
  71   1        
  72   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    261    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
